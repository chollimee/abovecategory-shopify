<style class="buddha-mm-style">.buddha-transparent{opacity:0.2 !important;z-index:1000000 !important;position:relative !important}.buddha-disabled,.buddha-disabled-menu{display:none !important}</style><style class="buddha-mm-style"> /* EFFECTS */ @-webkit-keyframes fadeInUp { from { opacity: 0; -webkit-transform: translate3d(0, 30px, 0); transform: translate3d(0, 30px, 0); } to { opacity: 1; -webkit-transform: none; transform: none; } } @keyframes fadeInUp { from { opacity: 0; -webkit-transform: translate3d(0, 30px, 0); transform: translate3d(0, 30px, 0); } to { opacity: 1; -webkit-transform: none; transform: none; } } /* GLOBAL */ li.buddha-menu-item { position:relative; } li.buddha-menu-item a { cursor:pointer; position:relative !important; } li.buddha-menu-item a:after { border:0px !important; } .horizontal-mega-menu li.buddha-menu-item:hover>ul.mm-submenu, .horizontal-mega-menu li.buddha-menu-item.mega-hover>ul.mm-submenu { top:100% !important; -webkit-animation: fadeInUp 0.3s ease; animation: fadeInUp 0.3s ease; display:block !important; } .horizontal-mega-menu li.buddha-menu-item.mega-hover>ul.mm-submenu { opacity:1 !important; } .horizontal-mega-menu li.buddha-menu-item.disabled:hover>ul.mm-submenu { top:-99999px !important; } ul.mm-submenu { border:0px !important; text-transform:none; padding:0px !important; top:-99999px !important; margin:0px !important; position: absolute; list-style: none; width: auto; background: #fff; box-shadow: 0 0px 20px rgba(0, 0, 0, 0.1); z-index:999999 !important; font-family:"Helvetica Neue","Helvetica",Arial; font-weight:normal; line-height:normal; white-space:initial; height:auto; visibility:visible !important; } ul.mm-submenu .sca-qv-button-wrap { display:none !important; } ul.mm-submenu a { font-weight:normal !important; text-transform:none; padding: 0px !important; line-height:initial; padding:0px !important; cursor:pointer; background:none !important; font-family:"Helvetica Neue",Arial !important; font-size:1em !important; white-space:initial !important; text-transform:none !important; } ul.mm-submenu a:after { border:0px; height:0px; } ul.mm-submenu a:hover:after { border:0px; height:0px; } ul.mm-submenu li { margin:0px; border:0px !important; } .horizontal-mega-menu>li>ul.mm-submenu { clip:rect(0px, 5000px, 5000px, -5000px); } .horizontal-mega-menu ul.mm-submenu li span { background: none !important; padding: 0px !important; margin:0px; font-weight:normal; } .vertical-mega-menu li.buddha-menu-item:hover ul.mm-submenu, .vertical-mega-menu li.buddha-menu-item ul.mm-submenu { display:none !important; } .vertical-mega-menu li { cursor:pointer } .vertical-mega-menu li a { -moz-osx-font-smoothing:grayscale; width:auto !important; } .vertical-mega-menu li a i.fa-angle-down { display:none !important; font-family:"FontAwesome" } .vertical-mega-menu li .toggle-menu-btn { color:inherit; background:none; border:0px; padding:0px !important; margin:0px !important; width:auto; height:auto; min-width:0px !important; } .vertical-mega-menu li.buddha-menu-item:hover>ul.mm-submenu { display:none !important; -webkit-animation:none; animation:none; } .vertical-mega-menu li.buddha-menu-item ul.mm-submenu.submenu-opened { display:block !important; } .vertical-mega-menu>li>ul.mm-submenu { padding-bottom:10px !important; position:relative !important; } .vertical-mega-menu ul.mm-submenu { top:100% !important; background:none; display:none !important; -webkit-animation:none; animation:none; position:relative; box-shadow:none; position:relative !important; top:0px !important; left:0px !important; } .vertical-mega-menu ul.mm-submenu li { border:0px; margin:0px; padding: 2px 0 2px 12px !important; display:block !important; } .vertical-mega-menu ul.mm-submenu>li { padding-top:6px !important; } .vertical-mega-menu ul.mm-submenu li:hover { background:none; } .vertical-mega-menu ul.mm-submenu li a { padding:0px !important; margin:0px !important; } .vertical-mega-menu ul.mm-submenu li img { width:100%; } .vertical-mega-menu ul.mm-submenu li ul { box-shadow:none; left:0px; position:relative; top:0px !important; border:0px; padding:0px !important; } /* TREE SUBMENU */ .horizontal-mega-menu>li>ul.mm-submenu.tree>li ul.mm-submenu { clip:rect(-5000px, 5000px, 5000px, -1px); } .horizontal-mega-menu>li>ul.mm-submenu.tree>li ul.mm-submenu.tree-open-left { clip:rect(-5000px, 176px, 5000px, -5000px); } .horizontal-mega-menu>li ul.mm-submenu.tree li.fa-angle-right:before { top:50% !important; position:absolute; right:8px; margin-top:-7px; font-size:14px; font-family:"FontAwesome" } .horizontal-mega-menu>li ul.mm-submenu.tree li.fa-angle-left:before { top:50% !important; position:absolute; left:8px; margin-top:-7px; font-size:14px; font-family:"FontAwesome" } .horizontal-mega-menu ul.mm-submenu.tree li { line-height:normal; display:block !important; text-align:left !important; padding: 15px 20px !important; border-bottom: 1px solid #eeeeee; min-width: 135px; width: auto; cursor: pointer; position: relative; margin:0px; box-sizing:content-box; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing:grayscale; } .horizontal-mega-menu ul.mm-submenu.tree li:last-child { border-bottom: 0px; } .horizontal-mega-menu ul.mm-submenu.tree li:hover, .horizontal-mega-menu ul.mm-submenu.tree li.mega-hover { /* background: #eff1f0; */ } .horizontal-mega-menu ul.mm-submenu.tree li.add-sub-item { font-weight: bold; } .horizontal-mega-menu ul.mm-submenu.tree li ul { left: 100%; position: absolute; top:-99999px !important; } .horizontal-mega-menu ul.mm-submenu.tree li ul.tree-open-left { right: 100%; left:auto; } .horizontal-mega-menu ul.mm-submenu.tree li:hover>ul,.horizontal-mega-menu ul.mm-submenu.tree li.mega-hover>ul { top:0 !important; } .vertical-mega-menu>li ul.mm-submenu.tree li.fa-angle-right:before, .vertical-mega-menu>li ul.mm-submenu.tree li.fa-angle-left:before { display:none !important; font-family:"FontAwesome" } /* SIMPLE SUBMENU */ ul.mm-submenu.simple>li .mega-menu-prices { clear:both; position: relative; } ul.mm-submenu.simple>li .mega-menu-prices span { font-size:0.95em; } ul.mm-submenu.simple>li .mega-menu-prices span.mega-menu-compare_at_price { text-decoration: line-through; } ul.mm-submenu.simple>li .mega-menu-prices span.mega-menu-price { } ul.mm-submenu.simple>li .mega-menu-prices span.mega-menu-sold_out { text-transform: uppercase; color:#d83e3e; font-weight: bold; opacity: 1; font-size:11px; } .horizontal-mega-menu ul.mm-submenu.simple { display: table !important; } .horizontal-mega-menu ul.mm-submenu.simple[columns="5"]>li { width: 20%; } .horizontal-mega-menu ul.mm-submenu.simple[columns="4"]>li { width: 25%; } .horizontal-mega-menu ul.mm-submenu.simple[columns="3"]>li { width: 33.33%; } .horizontal-mega-menu ul.mm-submenu.simple[columns="2"]>li { width: 50%; } .horizontal-mega-menu ul.mm-submenu.simple>li { box-sizing:border-box; float: left; vertical-align:top; text-align: center !important; padding: 10px 15px 20px !important; display: table-cell !important; min-height:280px; cursor: unset; position: relative; } .horizontal-mega-menu ul.mm-submenu.simple>li .mega-menu-item-container { max-width:220px; margin:0 auto; } .horizontal-mega-menu ul.mm-submenu.simple>li span.delete-sub-item { right: 1px; top: 0px !important; } .horizontal-mega-menu ul.mm-submenu.simple>li .mm-image-container { height:250px; position:relative; margin:0px auto 10px; display: table !important; } .horizontal-mega-menu ul.mm-submenu.simple>li .mm-image { display: table-cell !important; vertical-align:middle; } .horizontal-mega-menu ul.mm-submenu.simple>li .mm-image img { max-height:250px; cursor:pointer; width:auto; max-width:100%; } .horizontal-mega-menu ul.mm-submenu.simple>li .mm-featured-title { font-weight:bold; text-align:center !important; } .horizontal-mega-menu ul.mm-submenu.simple>li .mega-menu-prices span { opacity:0.6; } .vertical-mega-menu>li ul.mm-submenu.simple>li { padding-bottom:10px !important; padding-top:10px !important; } .vertical-mega-menu>li ul.mm-submenu.simple>li:last-child { padding-bottom:0px !important; } .vertical-mega-menu>li ul.mm-submenu.simple li .mm-image img { width:100% !important; max-width:240px !important; } /* .vertical-mega-menu>li>ul.mm-submenu.simple li .mega-menu-item-container { margin-left:10px; margin-right:10px; } */ .vertical-mega-menu ul.mm-submenu.simple>li .mega-menu-prices span { opacity:0.8; } /* optimize for tablet */ .vertical-mega-menu>li ul.mm-submenu.simple>li { width:100%; display:inline-table !important; vertical-align:top; } .vertical-mega-menu>li>ul.mm-submenu.simple>li:nth-child(1) { padding-top:0px !important; } .vertical-mega-menu>li ul.mm-submenu.simple[columns="2"]>li { width:50%; display:inline-table !important; vertical-align:top; } .vertical-mega-menu>li>ul.mm-submenu.simple[columns="2"]>li:nth-child(1) { padding-top:0px !important; } .vertical-mega-menu>li>ul.mm-submenu.simple[columns="2"]>li:nth-child(2) { padding-top:0px !important; } .vertical-mega-menu>li ul.mm-submenu.simple[columns="3"]>li { width:33.33%; display:inline-table !important; vertical-align:top; } .vertical-mega-menu>li>ul.mm-submenu.simple[columns="3"]>li:nth-child(1) { padding-top:0px !important; } .vertical-mega-menu>li>ul.mm-submenu.simple[columns="3"]>li:nth-child(2) { padding-top:0px !important; } .vertical-mega-menu>li>ul.mm-submenu.simple[columns="3"]>li:nth-child(3) { padding-top:0px !important; } /* TABBED SUBMENU */ .horizontal-mega-menu ul.mm-submenu.tabbed { display: block !important; min-height: 280px; } .horizontal-mega-menu ul.mm-submenu.tabbed[columns="5"]>li { width: 20% !important; } .horizontal-mega-menu ul.mm-submenu.tabbed[columns="5"]>li>ul.mm-submenu { width: 400% !important; } .horizontal-mega-menu ul.mm-submenu.tabbed[columns="5"]>li>ul.mm-submenu>li { width: 25% !important; } .horizontal-mega-menu ul.mm-submenu.tabbed[columns="4"]>li { width: 25% !important; } .horizontal-mega-menu ul.mm-submenu.tabbed[columns="4"]>li>ul.mm-submenu { width: 300% !important; } .horizontal-mega-menu ul.mm-submenu.tabbed[columns="4"]>li>ul.mm-submenu>li { width: 33.33% !important; } .horizontal-mega-menu ul.mm-submenu.tabbed[columns="3"]>li { width: 33.33% !important; } .horizontal-mega-menu ul.mm-submenu.tabbed[columns="3"]>li>ul.mm-submenu { width: 200% !important; } .horizontal-mega-menu ul.mm-submenu.tabbed[columns="3"]>li>ul.mm-submenu>li { width: 50% !important; } .horizontal-mega-menu ul.mm-submenu.tabbed[columns="2"]>li { width: 50% !important; } .horizontal-mega-menu ul.mm-submenu.tabbed[columns="2"]>li>ul.mm-submenu { width: 100% !important; } .horizontal-mega-menu ul.mm-submenu.tabbed[columns="2"]>li>ul.mm-submenu>li { width: 100% !important; display:block !important; } .horizontal-mega-menu ul.mm-submenu.tabbed>li.fa-angle-right:before { top:50% !important; position:absolute; right:10px; margin-top:-7px; font-size:14px; font-family:"FontAwesome" } .horizontal-mega-menu ul.mm-submenu.tabbed>li>ul.mm-submenu { border-left:1px solid #e6e6e6 !important; top:0 !important; display:none !important; left:100% !important; box-shadow: none; } .horizontal-mega-menu ul.mm-submenu.tabbed>li.tab-opened { /*background: #eff1f0;*/ } .horizontal-mega-menu ul.mm-submenu.tabbed>li.tab-opened ul.mm-submenu { display:block !important; } .horizontal-mega-menu ul.mm-submenu.tabbed>li.ui-sortable-helper>ul.mm-submenu { display:none !important; } .horizontal-mega-menu ul.mm-submenu.tabbed>li { box-sizing:border-box; float: left; vertical-align:top; text-align: left !important; padding: 12px !important; display: block !important; cursor: pointer; position: relative; clear:both; } .horizontal-mega-menu ul.mm-submenu.tabbed>li .mega-menu-item-container { max-width:230px; margin:0 auto; } .horizontal-mega-menu ul.mm-submenu.tabbed>li.add-sub-item { vertical-align:middle; line-height: normal; } .horizontal-mega-menu ul.mm-submenu.tabbed>li span.delete-sub-item { right: 1px; top: 1px !important; } .horizontal-mega-menu ul.mm-submenu.tabbed>li .mega-menu-prices { clear:both; position: relative; } .horizontal-mega-menu ul.mm-submenu.tabbed>li .mega-menu-prices span.mega-menu-compare_at_price { text-decoration: line-through; } .horizontal-mega-menu ul.mm-submenu.tabbed>li .mega-menu-prices span.mega-menu-sold_out { text-transform: uppercase; } .vertical-mega-menu ul.mm-submenu.tabbed>li { display:block !important; } .vertical-mega-menu ul.mm-submenu.tabbed>li.fa-angle-right:before { display:none !important; font-family:"FontAwesome" } /* PRODUCTS LIST WIDGET */ .horizontal-mega-menu ul.mm-submenu.simple>li .mm-list-name { border-bottom:1px solid #eeeeee; display:table !important; width:calc(100% + 10px); margin:-10px 0px 0px -15px; padding:10px !important; box-sizing:content-box; } ul.mm-submenu.simple>li .mm-list-name>span { display:table-cell !important; vertical-align:middle; font-weight: bold; font-size:1em; } ul.mm-submenu.simple>li ul.mm-product-list { width: 100%; margin:0px; display:block !important; position: relative !important; margin: 0px !important; padding: 0px !important; left: 0 !important; top: 0 !important; border: 0px !important; } ul.mm-submenu.simple>li ul.mm-product-list>li { display:table; width: 100% !important; min-height:unset; padding: 10px 0px 0px !important; text-align: left !important; } ul.mm-submenu.simple>li ul.mm-product-list>li div { display: table-cell !important; vertical-align:middle; } ul.mm-submenu.simple>li ul.mm-product-list>li .mm-list-image { width: 30%; padding-right: 10px !important; box-sizing: border-box; } ul.mm-submenu.simple>li ul.mm-product-list>li .mm-list-image img { width: 100%; vertical-align:middle; } ul.mm-submenu.simple>li ul.mm-product-list>li .mm-list-info { width: 70%; line-height:normal; } ul.mm-submenu.simple>li ul.mm-product-list>li .mm-list-info span.mm-product-name { font-weight: bold; } .vertical-mega-menu ul.mm-submenu.simple>li .mm-list-name { border-bottom:1px solid #eeeeee !important; display:table !important; width:100% !important; margin:0px !important; box-sizing:content-box !important; } .vertical-mega-menu li ul.mm-submenu.simple li ul.mm-product-list>li .mm-list-image { width: 100px !important; } .vertical-mega-menu li ul.mm-submenu.simple li ul.mm-product-list>li .mm-list-info { width: auto !important; } /* LINK LIST WIDGET */ ul.mm-submenu.simple>li ul.mm-submenu.link-list { width: 100%; top:100% !important; position: relative; line-height: normal; margin-top:10px; box-shadow:none; display:block !important; position:relative !important; top:0px !important; left:0px !important; opacity:1 !important; height:auto !important; } ul.mm-submenu.simple>li ul.mm-submenu.link-list li { width: 100%; text-align: left !important; padding:10px 0px 0px !important; display:block; } ul.mm-submenu.simple>li ul.mm-submenu.link-list li.add-sub-item { line-height: normal; } ul.mm-submenu.simple>li ul.mm-submenu.link-list li.add-sub-item:hover { background: none } ul.mm-submenu.simple>li ul.mm-submenu.link-list li span.delete-sub-item { top: 1px !important; right: 0px; } /* CONTACT SUBMENU */ ul.mm-submenu.mm-contact { width:100%; display: table !important; cursor: default; text-align:left !important; } .vertical-mega-menu ul.mm-submenu.mm-contact { display:none !important; } .vertical-mega-menu ul.mm-submenu.mm-contact .mm-contact-column { padding-top:10px !important; } ul.mm-submenu li.mm-contact-column { width:50%; padding:20px !important; display: table-cell !important; position: relative; } ul.mm-submenu li.mm-contact-column .feedback { margin:0px 0px 15px; font-weight:bold; } ul.mm-submenu li.mm-contact-column .successForm { color:#8eb94c; } ul.mm-submenu li.mm-contact-column .errorForm { color:#d83e3e; } ul.mm-submenu li.mm-contact-column a { display:block !important; clear:both; } ul.mm-submenu li.mm-contact-column form { margin:0px; padding:0px !important; } ul.mm-submenu li.mm-contact-column .mm-contact-content { max-width: 500px; text-transform:none; } ul.mm-submenu li.mm-contact-column h3 { display: block !important; font-weight: 200; margin-bottom: 10px; font-size:1.6em; font-family:"Helvetica Neue","Helvetica",Arial; font-style:normal; } ul.mm-submenu li.mm-contact-column fieldset { border: medium none !important; margin: 0 0 10px; min-width: 100%; padding: 0 !important; width: 100%; } ul.mm-submenu li.mm-contact-column fieldset:last-child { margin:0px; } ul.mm-submenu li.mm-contact-column input[type="text"], ul.mm-submenu li.mm-contact-column input[type="email"], ul.mm-submenu li.mm-contact-column textarea { width:100%; border:1px solid #d3dbe2; background:#FFF; margin:0 0 5px; padding:5px 10px !important; height: 36px; } ul.mm-submenu li.mm-contact-column textarea { height:100px; max-width:100%; resize:none; } ul.mm-submenu li.mm-contact-column button { cursor:pointer; width:105px; float: right; border:none; padding:10px !important; text-transform: uppercase; font-weight: 300; font-family:"Helvetica Neue","Helvetica",Arial; font-size:1em } ul.mm-submenu li.mm-contact-column button:active { box-shadow:inset 0 1px 3px rgba(0, 0, 0, 0.5); } ul.mm-submenu li.mm-contact-column button#map-save { position: absolute; bottom: 25px; right: 25px; } ul.mm-submenu li.mm-contact-column input:focus, .mm-contact-column textarea:focus { outline:0; border:1px solid #999; } .vertical-mega-menu ul.mm-submenu li.mm-contact-column { width:100% !important; display:block !important; padding:0 15px !important; } .vertical-mega-menu ul.mm-submenu li.mm-contact-column h3 { font-size:1.2em; } .vertical-mega-menu ul.mm-submenu.mm-contact .mm-contact-column { width:100% !important; display:inline-table !important; vertical-align:top; } .vertical-mega-menu ul.mm-submenu.mm-contact[columns="2"] .mm-contact-column { width:50% !important; } .vertical-mega-menu ul.mm-submenu.mm-contact[columns="2"] li.mm-contact-column:nth-child(1) { padding-top:0px !important; } .vertical-mega-menu ul.mm-submenu.mm-contact[columns="2"] li.mm-contact-column:nth-child(2) { padding-top:0px !important; } </style><script>var DomOutline=function(e){function t(e){var t=document.createElement("style");t.type="text/css",t.id="DomOutlineStyle",jQuery("#DomOutlineStyle").remove(),document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.innerHTML=e}function n(){if(c.initialized!==!0){var e="."+c.opts.namespace+" { background: #09c; position: absolute; z-index: 1000000;}."+c.opts.namespace+"_label { background: #09c; border-radius: 2px; color: #fff; font: bold 12px/12px Helvetica, sans-serif; padding: 4px 6px; position: absolute; text-shadow: 0 1px 1px rgba(0, 0, 0, 0.25); z-index: 1000001;}.DomOutlineBox{box-shadow: 0px 0px 0px 2px #09c;}";t(e),c.initialized=!0}}function o(){jQuery.each(c.elements,function(e,t){t.remove()})}function a(e,t,n){var o=e.tagName.toLowerCase();return e.id&&(o+="#"+e.id),e.className&&(o+=("."+jQuery.trim(e.className).replace(/ /g,".")).replace(/\.\.+/g,".")),o+" ("+Math.round(t)+"x"+Math.round(n)+")"}function s(){return c.elements.window||(c.elements.window=jQuery(window)),c.elements.window.scrollTop()}function i(e){if(-1===e.target.className.indexOf(c.opts.namespace)&&!(jQuery(e.target).hasClass("buddha-menu-item")||jQuery(e.target).parent().hasClass("buddha-menu-item")||jQuery(e.target).parent().parent().hasClass("buddha-menu-item")||jQuery(e.target).find(".buddha-menu-item").length>0)&&(!c.opts.filter||jQuery(e.target).is(c.opts.filter))){u.element=e.target;var t=c.opts.borderWidth,n=s(),o=u.element.getBoundingClientRect(),i=o.top+n;a(u.element,o.width,o.height),Math.max(0,i-20-t,n),Math.max(0,o.left-t);jQuery("*").removeClass("DomOutlineBox"),jQuery(u.element).addClass("DomOutlineBox")}}function r(e){return(e.keyCode===c.keyCodes.ESC||e.keyCode===c.keyCodes.BACKSPACE||e.keyCode===c.keyCodes.DELETE)&&u.stop(),!1}function l(e){return u.stop(),c.opts.onClick(u.element),!1}e=e||{};var u={},c={opts:{namespace:e.namespace||"DomOutline",borderWidth:e.borderWidth||2,onClick:e.onClick||!1,filter:e.filter||!1},keyCodes:{BACKSPACE:8,ESC:27,DELETE:46},active:!1,initialized:!1,elements:{}},m=null,p=null;return u.start=function(){n(),c.active!==!0&&(c.active=!0,jQuery("body").on("mousemove."+c.opts.namespace,i),jQuery("body").on("keyup."+c.opts.namespace,r),c.opts.onClick&&(jQuery("body").on("mousedown."+c.opts.namespace,function(e){void 0!=jQuery._data(e.target,"events")&&(p=e.target,m=jQuery._data(e.target,"events").click,jQuery._data(e.target,"events").click=null)}),setTimeout(function(){jQuery("body").on("click."+c.opts.namespace,function(e){return e.preventDefault(),c.opts.filter&&!jQuery(e.target).is(c.opts.filter)?!1:(l.call(this,e),void jQuery(e.target).bind(m))})},50)))},u.stop=function(){jQuery("*").removeClass("DomOutlineBox"),c.active=!1,o(),jQuery("body").off("mousemove."+c.opts.namespace).off("keyup."+c.opts.namespace).off("mousedown."+c.opts.namespace).off("click."+c.opts.namespace),null!=p&&null!=m&&(jQuery._data(p,"events").click=m,m=null,p=null)},u};</script> <script> if (window.addEventListener) { var schemaJSON = "[{\"position\":0,\"icon\":\"angle-down\",\"name\":\"Men\",\"link\":\"collection\",\"id\":\"347255431\",\"type\":\"simple\",\"items\":[{\"position\":0,\"name\":\"MEN\",\"link\":\"link-list\",\"items\":[{\"position\":0,\"name\":\"Bibs\/Shorts\",\"link\":\"no-link\"},{\"position\":1,\"name\":\"Jerseys\",\"link\":\"no-link\"},{\"position\":2,\"name\":\"Cold Weather\",\"link\":\"no-link\"},{\"position\":3,\"name\":\"Socks\",\"link\":\"no-link\"},{\"position\":4,\"name\":\"Gloves\",\"link\":\"no-link\"},{\"position\":5,\"name\":\"T Shirts\",\"link\":\"no-link\"}]},{\"position\":1,\"name\":\"WOMEN\",\"link\":\"link-list\",\"items\":[{\"position\":0,\"name\":\"Base Layers\",\"link\":\"no-link\"},{\"position\":1,\"name\":\"Bibs\/Shorts\",\"link\":\"no-link\"},{\"position\":2,\"name\":\"Jerseys\",\"link\":\"no-link\"},{\"position\":3,\"name\":\"Cold Weather\",\"link\":\"no-link\"},{\"position\":4,\"name\":\"Socks\",\"link\":\"no-link\"},{\"position\":5,\"name\":\"Gloves\",\"link\":\"no-link\"}]},{\"position\":2,\"name\":\"BIKES\",\"link\":\"link-list\",\"items\":[{\"position\":0,\"name\":\"Baum\",\"link\":\"no-link\"},{\"position\":1,\"name\":\"Pegoretti\",\"link\":\"no-link\"},{\"position\":2,\"name\":\"Pinarello\",\"link\":\"no-link\"},{\"position\":3,\"name\":\"Mosaic\",\"link\":\"no-link\"}]},{\"position\":3,\"name\":\"ACCESSORIES\",\"link\":\"link-list\",\"items\":[{\"position\":0,\"name\":\"Helmets\",\"link\":\"no-link\"},{\"position\":1,\"name\":\"Shoes\",\"link\":\"no-link\"},{\"position\":2,\"name\":\"Water Bottles\",\"link\":\"no-link\"},{\"position\":3,\"name\":\"Embrocations\",\"link\":\"no-link\"},{\"position\":4,\"name\":\"Travel Cases\",\"link\":\"no-link\"},{\"position\":5,\"name\":\"Phone Cases\",\"link\":\"no-link\"},{\"position\":6,\"name\":\"Gift Cards\",\"link\":\"no-link\"}]},{\"position\":4,\"name\":\"COMPONENTS\",\"link\":\"link-list\",\"items\":[{\"position\":0,\"name\":\"Saddles\",\"link\":\"no-link\"},{\"position\":1,\"name\":\"Power Meters\",\"link\":\"no-link\"},{\"position\":2,\"name\":\"Ceramic Bearings\",\"link\":\"no-link\"}]}]},{\"position\":1,\"icon\":\"\",\"name\":\" Women\",\"link\":\"collection\",\"id\":\"347257159\",\"type\":\"none\"},{\"position\":2,\"icon\":\"\",\"name\":\" Bikes\",\"link\":\"collection\",\"id\":\"347257607\",\"type\":\"none\"},{\"position\":3,\"icon\":\"\",\"name\":\" Accessories\",\"link\":\"collection\",\"id\":\"347258759\",\"type\":\"none\"},{\"position\":4,\"icon\":\"\",\"name\":\"Brands\",\"link\":\"page\",\"id\":\"226396615\",\"type\":\"none\"},{\"position\":5,\"icon\":\"\",\"name\":\"Rides\",\"link\":\"page\",\"id\":\"226396679\",\"type\":\"none\"},{\"position\":6,\"name\":\"Journal\",\"link\":\"page\",\"id\":\"226396999\",\"type\":\"none\"}]", schemaLinksJSON = '{"collection":{"347255431":"\/collections\/men","347257159":"\/collections\/women","347257607":"\/collections\/bikes","347258759":"\/collections\/accessories"},"page":{"226396615":"\/pages\/brands","226396679":"\/pages\/rides","226396999":"\/pages\/journal"}}', schemaDesignJSON = '[{"action":"menu-select","value":"main-menu"},{"action":"design","setting":"vertical_font_size","value":"13px"},{"action":"design","setting":"vertical_link_hover_color","value":"#0da19a"},{"action":"design","setting":"vertical_link_color","value":"#4e4e4e"},{"action":"design","setting":"vertical_text_color","value":"#4e4e4e"},{"action":"design","setting":"text_color","value":"#222222"},{"action":"design","setting":"font_size","value":"13px"},{"action":"design","setting":"button_text_color","value":"#ffffff"},{"action":"design","setting":"button_text_hover_color","value":"#ffffff"},{"action":"design","setting":"background_color","value":"#ffffff"},{"action":"design","setting":"background_hover_color","value":"#f9f9f9"},{"action":"design","setting":"link_color","value":"#4e4e4e"},{"action":"design","setting":"button_background_color","value":"#0da19a"},{"action":"design","setting":"link_hover_color","value":"#0da19a"},{"action":"design","setting":"button_background_hover_color","value":"#0d8781"}]', undo = [], redo = [], action = "", tempMenuObject = {}, originalBindings = {}, initRunning = false, changedMenu = false, submenuToggled = false, changingPage = false, saving = false, prices = [], productImages = [], panelOpened = false, verticalMenuMaxWidth = 10000, selectedMenu; /* set product prices */ {% for product in collections["mega-menu-featured-products"].products %} prices[{{ product.id }}] = '{% if product.available %}{% if product.compare_at_price > product.price %}<span class="mega-menu-compare_at_price">{{ product.compare_at_price | money }}</span> {% endif %}<span class="mega-menu-price">{{ product.price | money }}</span>{% else %}<span class="mega-menu-sold_out">Sold out</span>{% endif %}'; productImages[{{ product.id }}] = '{{ product.featured_image | product_img_url: "240x" }}'; {% endfor %} /* get the collection images */ var collectionImages = []; /* INITIALIZE MENU FUNCTIONS */ jQuery(document).ready(function(){ /* check it mega menu app is installed */ var installed = false; jQuery("script").each(function(){ if (jQuery(this).text().indexOf("mm-init.js?")!=-1 && jQuery(this).text().indexOf("asyncLoad")!=-1 && jQuery(this).text().indexOf("initSchema")==-1) { installed = true; } }); if (jQuery("head").html().indexOf("assets\/mm-init.js?")!=-1 || installed) { initSchema(); /* remove shopify fixed top bar (keep verifying in case you navigate with mobile view, then resize) */ if (window.self!==window.top) { jQuery("#admin_bar_iframe").remove(); jQuery("html").css("padding-top","0px"); setInterval(function(){ jQuery("*").each(function(){ if (jQuery(this).css("top")=="40px" && jQuery(this).css("position")=="fixed") { jQuery(this).css("top","0"); } }); },1000); } /* when a certain element is clicked, reinit the menus and reset the simple submenu width, in case the side menu is hidden */ var clicked = false; jQuery("*").click(function(){ var element = jQuery(this); if (!clicked) { clicked = true; if (!changingPage && element.closest(".buddha-menu-item").length==0 && !element.hasClass("vertical-mega-menu") && !element.hasClass("horizontal-mega-menu")) { applyMegaMenu(); } setTimeout(function(){ if (!changingPage && element.closest(".buddha-menu-item").length==0 && !element.hasClass("vertical-mega-menu") && !element.hasClass("horizontal-mega-menu")) { applyMegaMenu(); } },350); } setTimeout(function(){ clicked = false; },400); }); var reinitTimeout; var windowWidth = jQuery(window).width(); jQuery(window).resize(function(){ if (windowWidth!=jQuery(window).width()) { jQuery(".hovering").removeClass("hovering"); jQuery(".submenu-opened").hide().removeClass("submenu-opened"); jQuery(".fa-minus-circle").removeClass("fa-minus-circle").addClass("fa-plus-circle"); clearTimeout(reinitTimeout); reinitTimeout = setTimeout(function(){ applyMegaMenu(); windowWidth=jQuery(window).width(); },300); } }); setTimeout(function(){ applyMegaMenu(); },10); } else if (typeof beforeMegaMenuInterval!=="undefined") { jQuery(".buddha-disabled-menu").removeClass("buddha-disabled-menu"); jQuery(".buddha-mm-style").remove(); clearInterval(beforeMegaMenuInterval); } else { jQuery(".buddha-disabled-menu").removeClass("buddha-disabled-menu"); jQuery(".buddha-mm-style").remove(); } }); function initSchema() { schemaJSON = JSON.parse(schemaJSON); schemaLinksJSON = JSON.parse(schemaLinksJSON); schemaDesignJSON = JSON.parse(schemaDesignJSON); initRunning = true; applyMegaMenu(); /* apply custom design */ recreateDesign(); action = ""; initRunning = false; parent.postMessage(["updateToolbar",JSON.stringify(schemaDesignJSON),JSON.stringify(linkLists),JSON.stringify(undo),JSON.stringify(redo),changedMenu], "*" ); } function applyMegaMenu(menu) { if (typeof beforeMegaMenuInterval!=="undefined") { clearInterval(beforeMegaMenuInterval); } if (menu!=undefined) { var newSchemaDesign = []; selectedMenu = menu; jQuery.each(schemaDesignJSON,function(key, item){ if (item.action!="menu-select") { newSchemaDesign.push(item); } }); schemaDesignJSON = newSchemaDesign; changedMenu = true; } else { jQuery.each(schemaDesignJSON,function(key, item){ if (item.action=="menu-select") { selectedMenu = item.value; } }); } jQuery(".vertical-mega-menu").removeClass("vertical-mega-menu"); jQuery(".horizontal-mega-menu").removeClass("horizontal-mega-menu"); jQuery(".buddha-disabled").removeClass("buddha-disabled"); jQuery(".buddha-menu-item").remove(); jQuery("#themeScript").remove(); var links = []; jQuery.each(linkLists,function(key, item){ if (selectedMenu==key) { links = item.items; return false; } }); if (selectedMenu!=undefined && selectedMenu!="none" && links.length>0) { jQuery("ul").each(function(){ var menuFits = true; var forceMenu = false; var elementFits = 0; tempMenuObject = {}; tempMenuObject.ul = jQuery(this); jQuery(this).find(">li").each(function(){ var li = jQuery(this); var a = jQuery(this).find("a").first(); var href = a.attr("href"); if ((href==undefined || (href!=undefined && href.substr(0,1)=="#")) && jQuery(this).find("a:nth-child(2)").length>0) { a = jQuery(this).find("a:nth-child(2)"); href = a.attr("href"); } else if ((href==undefined || (href!=undefined && href.substr(0,1)=="#")) && jQuery(this).find("a>a").length>0) { a = jQuery(this).find("a>a"); href = a.attr("href"); } if (links[elementFits]!=undefined && href==links[elementFits]) { if (tempMenuObject.liClasses==undefined) { tempMenuObject.liClasses = ""; } tempMenuObject.liClasses = concatClasses(li.attr("class"),tempMenuObject.liClasses); if (tempMenuObject.aClasses==undefined) { tempMenuObject.aClasses = []; } tempMenuObject.aClasses = concatClasses(a.attr("class"),tempMenuObject.aClasses); if (tempMenuObject.liItems==undefined) { tempMenuObject.liItems = []; } if (jQuery.inArray(li,tempMenuObject.liItems)==-1) { tempMenuObject.liItems[tempMenuObject.liItems.length] = li; } li.addClass("buddha-transparent"); elementFits++; } else if (elementFits>0 && elementFits!=links.length) { menuFits = false; } }); if ((menuFits && elementFits>0 && elementFits==links.length) || forceMenu) { var liClasses = getSpecificClasses(tempMenuObject.liClasses); var aClasses = getSpecificClasses(tempMenuObject.aClasses); jQuery.each(tempMenuObject.liItems, function(key, item) { jQuery(item).removeClass("buddha-transparent").addClass("buddha-disabled"); }); jQuery.each(schemaJSON.reverse(), function(key, item) { var firstLi = tempMenuObject.ul.find("li").first(); if (firstLi.find("a").length==0 && firstLi.next().find("a").length>0) { var clone = firstLi.next().clone(); } else { var clone = firstLi.clone(); } var insertedClone = clone.prependTo(tempMenuObject.ul).removeAttr("class").addClass("buddha-menu-item "+liClasses["common"]); if (item.link=="http") { var href = item.http; } else { var href = (item.id!=undefined && schemaLinksJSON[item.link]!=undefined && schemaLinksJSON[item.link][item.id]!=undefined) ? schemaLinksJSON[item.link][item.id] : schemaLinksJSON[item.link]; } var icon = ""; if (item.icon!=undefined && item.icon!="") { icon = "<i class=\"fa fa-"+item.icon+"\" aria-hidden=\"true\"></i> "; } var aContent = icon+item.name; if (insertedClone.find("a").first().find(">:first-child").length>0 && insertedClone.find("a").first().find(">:first-child").prop("tagName").toLowerCase()=="span" && insertedClone.find("a").first().find("span").first().text().trim()==insertedClone.find("a").first().text().trim()) { var spanClass = insertedClone.find("a").first().find(">:first-child").attr("class"); aContent = "<span class=\""+spanClass+"\">"+aContent+"</span>"; } var aHtml = "<a class=\""+aClasses["common"]+"\" data-href=\""+href+"\" onclick=\"mmGoToPage(this)\">"+aContent+"</a>"; var submenuHtml = addSubMenus(item); insertedClone.html(aHtml+submenuHtml); if (item.type=="contact") { jQuery("#mm-contact").clone().appendTo(insertedClone).show().removeAttr("id"); } }); /* add arrow to main menu items that have submenus */ tempMenuObject.ul.find(">li").each(function(){ if (jQuery(this).find("ul.mm-submenu").length>0) { jQuery(this).find(">a").append(" <i class=\"fa fa-angle-down\" aria-hidden=\"true\"></i>"); } }); /* add toggle submenu button for vertical menu */ tempMenuObject.ul.find(" ul.mm-submenu").each(function(){ jQuery(this).parent().find(">a").append(" <button class=\"toggle-menu-btn\" style=\"display:none;\" onclick=\"toggleSubmenu(this)\"><i class=\"fa fa-plus-circle\" aria-hidden=\"true\"></i></button>"); }); schemaJSON.reverse(); if (liClasses["first"] || aClasses["first"] || liClasses["last"] || aClasses["last"]) { tempMenuObject.ul.find(".buddha-menu-item").first().addClass(liClasses["first"]); tempMenuObject.ul.find(".buddha-menu-item").last().addClass(liClasses["last"]); tempMenuObject.ul.find(".buddha-menu-item").first().find("a").first().addClass(aClasses["first"]); tempMenuObject.ul.find(".buddha-menu-item").last().find("a").first().addClass(aClasses["last"]); } /* set menu item as active */ if (liClasses["active"] || aClasses["active"]) { tempMenuObject.ul.find(">.buddha-menu-item").each(function() { var a = jQuery(this).find("a").first(); if (a.attr("data-href")==window.location.pathname) { a.addClass(aClasses["active"]); jQuery(this).addClass(liClasses["active"]); } }); } tempMenuObject = {}; /* add theme specific scripts if mega menu added */ var ulPath = getUlPath(jQuery(this)); reinitMenus(ulPath); } else { jQuery(".buddha-transparent").removeClass("buddha-transparent"); } }); jQuery(".buddha-disabled-menu").removeClass("buddha-disabled-menu"); if (window.self!==window.top) { parent.postMessage(["updateToolbar",JSON.stringify(schemaDesignJSON),JSON.stringify(linkLists),JSON.stringify(undo),JSON.stringify(redo),changedMenu], "*" ); } } } /* determines if menu should be vertical or horizontal */ function reinitMenus(ulPath) { jQuery(".submenu-opened").hide(); var previousItemTop; /* var horizontal = true; */ var verticalItemsNr = 1; jQuery(ulPath+" .buddha-menu-item").each(function() { previousItemTop = (previousItemTop==undefined) ? jQuery(this).position().top : previousItemTop; if (previousItemTop!=jQuery(this).position().top && (previousItemTop+1)!=jQuery(this).position().top && (previousItemTop+2)!=jQuery(this).position().top && (previousItemTop-1)!=jQuery(this).position().top && (previousItemTop-2)!=jQuery(this).position().top) { /* horizontal = false; */ verticalItemsNr++; } previousItemTop = jQuery(this).position().top; }); if (verticalItemsNr!=jQuery(ulPath+" .buddha-menu-item").length || (verticalItemsNr==1 && jQuery("body").width()>verticalMenuMaxWidth)) { jQuery(ulPath).addClass("horizontal-mega-menu").removeClass("vertical-mega-menu"); jQuery(ulPath+" ul.mm-submenu").removeAttr("style"); jQuery(ulPath+" .fa-minus-circle").removeClass("fa-minus-circle").addClass("fa-plus-circle"); jQuery(ulPath+" .submenu-opened").removeClass("submenu-opened"); jQuery(ulPath+" .toggle-menu-btn").hide(); } else { jQuery(".mega-hover").removeClass("mega-hover"); jQuery(".disabled").removeClass("disabled"); jQuery(ulPath).addClass("vertical-mega-menu").removeClass("horizontal-mega-menu"); jQuery(ulPath+" .toggle-menu-btn").show(); var iconDistance = parseInt(jQuery(ulPath+">li>a").css("font-size")); var totalPaddingLeft = parseInt(jQuery(ulPath+">li").css("padding-left"))+parseInt(jQuery(ulPath+">li>a").css("padding-left")); var paddingLeftSubSubmenus = totalPaddingLeft; if (totalPaddingLeft>15) { paddingLeftSubSubmenus = 15; } var totalPaddingTop = parseInt(jQuery(ulPath+">li").css("padding-top"))+parseInt(jQuery(ulPath+">li>a").css("padding-top")); jQuery("#verticalMenuSpacing").remove(); var styleSheet = '<style id="verticalMenuSpacing" type="text/css">'; /* styleSheet += ulPath+'.vertical-mega-menu>li>ul.mm-submenu{margin-left:'+iconDistance+'px !important;margin-right:'+iconDistance+'px !important}'; */ /* styleSheet += ulPath+'.vertical-mega-menu>li>ul.mm-submenu>li:first-child{margin-top:-'+totalPaddingTop+'px !important}'; */ /* styleSheet += ulPath+'.vertical-mega-menu>li>ul.mm-submenu>li:last-child{margin-bottom:'+totalPaddingTop+'px !important}'; */ styleSheet += ulPath+'.vertical-mega-menu>li>ul.mm-submenu.tree>li{padding-left:'+totalPaddingLeft+'px !important;padding-right:'+totalPaddingLeft+'px !important;}'; styleSheet += ulPath+'.vertical-mega-menu>li>ul.mm-submenu.tree>li ul.mm-submenu li {padding-left:'+paddingLeftSubSubmenus+'px !important;padding-right:'+paddingLeftSubSubmenus+'px !important;}'; styleSheet += ulPath+'.vertical-mega-menu>li ul.mm-submenu.simple>li{padding-left:'+totalPaddingLeft+'px !important;padding-right:'+totalPaddingLeft+'px !important;}'; styleSheet += ulPath+'.vertical-mega-menu>li>ul.mm-submenu.tabbed>li{padding-left:'+totalPaddingLeft+'px !important;padding-right:'+totalPaddingLeft+'px !important;}'; styleSheet += ulPath+'.vertical-mega-menu>li>ul.mm-submenu.tabbed>li>ul.mm-submenu>li {padding-left:'+paddingLeftSubSubmenus+'px !important;padding-right:'+paddingLeftSubSubmenus+'px !important;}'; styleSheet += ulPath+'.vertical-mega-menu>li ul.mm-submenu.mm-contact>li{padding-left:'+totalPaddingLeft+'px !important;padding-right:'+totalPaddingLeft+'px !important;}'; /* styleSheet += ulPath+'.vertical-mega-menu>li ul.mm-submenu.simple li{padding-left:0px !important;padding-right:0px !important}'; */ styleSheet += "</style>"; jQuery("head").append(styleSheet); /*jQuery(ulPath+">li>ul.mm-submenu").css({"margin-top":-totalPaddingTop+"px","margin-bottom":totalPaddingTop+"px","margin-left":iconDistance+"px"}); jQuery(ulPath+">li ul.mm-submenu li").css({"padding-left":totalPaddingLeft+"px","padding-top":totalPaddingTop+"px"});*/ } jQuery(".submenu-opened").show(); jQuery(".buddha-menu-item").each(function(){ setSubmenuBoundries(jQuery(this)); setContactSubmenuBoundries(jQuery(this)); }); jQuery("ul.mm-submenu.tabbed>li").each(function(){ if (jQuery(this).parent().find(".tab-opened").length==0) { jQuery(this).parent().find(".tab-opened").removeClass("tab-opened"); jQuery(this).addClass("tab-opened"); setTabbedSubmenuBoundries(jQuery(this)); } else if (jQuery(this).hasClass("tab-opened")) { setTabbedSubmenuBoundries(jQuery(this)); } }); jQuery("ul.mm-submenu.tabbed>li").unbind(); jQuery("ul.mm-submenu.tabbed>li").hover(function(){ jQuery(this).parent().find(".tab-opened").removeClass("tab-opened"); jQuery(this).addClass("tab-opened"); setTabbedSubmenuBoundries(jQuery(this)); }); /* set first tab of every tabbed submenu be opened */ jQuery("ul.mm-submenu.tabbed>li:first-child").each(function(){ if (jQuery(this).parent().find(".tab-opened").length==0) { jQuery(this).addClass("tab-opened"); setTabbedSubmenuBoundries(jQuery(this)); } }); addTouch(); if (panelOpened) { jQuery(".horizontal-mega-menu>.buddha-menu-item").hover(function(){ jQuery(".mega-hover").removeClass("mega-hover"); if (panelOpened) { jQuery(this).addClass("mega-hover"); } }); } else { jQuery(".mega-hover").removeClass("mega-hover"); } jQuery(".horizontal-mega-menu>.buddha-menu-item").hover(function(){ setSubmenuBoundries(jQuery(this)); setContactSubmenuBoundries(jQuery(this)); if (jQuery(this).find(".tab-opened").length>0) { setTabbedSubmenuBoundries(jQuery(this).find(".tab-opened")); } }); } /* GENERATE MENU FUNCTIONS */ function concatClasses(newClasses, oldClasses) { if (oldClasses!="") { classes = oldClasses.split(" "); } else { classes = []; } if (newClasses!=undefined && newClasses!="") { newClasses = newClasses.split(" "); jQuery.each(newClasses, function(key, item) { if (jQuery.inArray(item,classes)==-1) { classes[classes.length] = item; } }); } return classes.join(" "); } function getSpecificClasses(classes) { var specificClasses = []; if (classes!=undefined) { classes = classes.split(" "); var commonClasses = ""; jQuery.each(classes, function(key, item) { if (item.indexOf("active")!=-1 || item.indexOf("selected")!=-1 || item.indexOf("current")!=-1) { specificClasses["active"] = item; } else if (item.indexOf("focus")!=-1) { specificClasses["focus"] = item; } else if (item.indexOf("first")!=-1) { specificClasses["first"] = item; } else if (item.indexOf("last")!=-1) { specificClasses["last"] = item; } else if (item.indexOf("buddha")==-1 && item.indexOf("dropdown")==-1 && item.indexOf("mm-subopen")==-1) { commonClasses += " "+item; } }); specificClasses["common"] = commonClasses.trim(); } return specificClasses; } /* used to generate submenus */ function addSubMenus(parentItem) { var submenuHtml = ""; if (parentItem.items!=undefined && parentItem.items.length>0) { var subMenuType = (parentItem.type!=undefined) ? " "+parentItem.type : ""; submenuHtml += "<ul class=\"mm-submenu"+subMenuType+"\">"; jQuery.each(parentItem.items,function(pos,subitem){ if (subitem.link=="http") { var href = subitem.http; } else { var href = (subitem.id!=undefined && schemaLinksJSON[subitem.link] && schemaLinksJSON[subitem.link][subitem.id]) ? schemaLinksJSON[subitem.link][subitem.id] : schemaLinksJSON[subitem.link]; } if (parentItem.type=="simple") { if (subitem.link=="best-sellers") { submenuHtml += "<li><div class=\"mega-menu-item-container\"><div class=\"mm-list-name\"><span>"+subitem.name+"</span></div></div>"; } else if (subitem.link=="newest-products") { submenuHtml += "<li><div class=\"mega-menu-item-container\"><div class=\"mm-list-name\"><span>"+subitem.name+"</span></div></div>"; } else if (subitem.link=="link-list") { subitem.type = "link-list"; var linkList = addSubMenus(subitem); submenuHtml += "<li data-href=\""+href+"\" onclick=\"mmGoToPage(this)\"><div class=\"mega-menu-item-container\"><div class=\"mm-list-name\"><span>"+subitem.name+"</span></div>"+linkList+"</div>"; } else { var image = ""; if (subitem.link=="product" && productImages[subitem.id]!=undefined && productImages[subitem.id].indexOf("no-image")==-1) { image = "<div class=\"mm-image-container\"><div class=\"mm-image\"><img src=\""+productImages[subitem.id]+"\"></div></div>"; } else if (subitem.link=="collection" && collectionImages[subitem.id]!=undefined && collectionImages[subitem.id].indexOf("no-image")==-1) { image = "<div class=\"mm-image-container\"><div class=\"mm-image\"><img src=\""+collectionImages[subitem.id]+"\"></div></div>"; } else if (subitem.image!=undefined) { image = "<div class=\"mm-image-container\"><div class=\"mm-image\"><img src=\""+subitem.image+"\"></div></div>"; } var pricesHTML = ""; if (subitem.link=="product" && subitem.id!=undefined && prices[subitem.id]!=undefined) { pricesHTML = "<div class=\"mega-menu-prices\">"+prices[subitem.id]+"</div>"; } submenuHtml += "<li data-href=\""+href+"\" onclick=\"mmGoToPage(this)\"><div class=\"mega-menu-item-container\">"+image+"<a class=\"mm-featured-title\">"+subitem.name+"</a>"+pricesHTML+"</div>"; } } else { submenuHtml += "<li data-href=\""+href+"\" onclick=\"mmGoToPage(this)\"><a>"+subitem.name+"</a>"; } /* set the simple menu type for each tab child */ if (parentItem.type=="tabbed") { subitem.type = "simple"; } if (subitem.link!="link-list") { submenuHtml += addSubMenus(subitem); } submenuHtml += "</li>"; }); submenuHtml += "</ul>"; } return submenuHtml; } /* TOOLTIP FUNCTIONS */ function undoAction(){ if (window.self!==window.top) { currentUndo = undo[undo.length-1]; if (currentUndo.action=="design") { redo.unshift(currentUndo); schemaDesignJSON.splice(-1,1); undo.splice(-1,1); recreateDesign(); } reinitMenus(); /* if no mega menu present, remove theme scripts */ if (jQuery(".buddha-menu-item").length==0) { jQuery("#themeScript").remove(); } parent.postMessage(["updateToolbar",JSON.stringify(schemaDesignJSON),JSON.stringify(linkLists),JSON.stringify(undo),JSON.stringify(redo),changedMenu], "*" ); } } function redoAction(){ if (window.self!==window.top) { tempMenuObject = {}; jQuery(".buddha-transparent").removeClass("buddha-transparent"); action = redo[0].action; if (action=="design") { schemaDesignJSON.push(redo[0]); undo.push(redo[0]); recreateDesign(); } redo.splice(0,1); reinitMenus(); /* if no mega menu present, remove theme scripts */ if (jQuery(".buddha-menu-item").length==0) { jQuery("#themeScript").remove(); } parent.postMessage(["updateToolbar",JSON.stringify(schemaDesignJSON),JSON.stringify(linkLists),JSON.stringify(undo),JSON.stringify(redo),changedMenu], "*" ); } } function clearAction(){ if (window.self!==window.top) { jQuery.each(undo, function(key, item) { undoAction(); }); redo = []; /* if no mega menu present, remove theme scripts */ if (jQuery(".buddha-menu-item").length==0) { jQuery("#themeScript").remove(); } parent.postMessage(["updateToolbar",JSON.stringify(schemaDesignJSON),JSON.stringify(linkLists),JSON.stringify(undo),JSON.stringify(redo),changedMenu], "*" ); } } /* DESIGN */ var propSettings = {"background_color":{element:".horizontal-mega-menu ul.mm-submenu",attribute:"background"},"background_hover_color":{element:".horizontal-mega-menu ul.mm-submenu.tree li:hover, .horizontal-mega-menu ul.mm-submenu.tree li.mega-hover, .horizontal-mega-menu ul.mm-submenu.tabbed>li.tab-opened",attribute:"background"},"text_color":{element:".horizontal-mega-menu ul.mm-submenu",attribute:"color"},"link_color":{element:".horizontal-mega-menu ul.mm-submenu li a,.horizontal-mega-menu ul.mm-submenu li.fa",attribute:"color"},"link_hover_color":{element:".horizontal-mega-menu ul.mm-submenu.tree li:hover>a, .horizontal-mega-menu ul.mm-submenu.tree li.mega-hover>a, .horizontal-mega-menu ul.mm-submenu.tabbed>li.tab-opened>a, .horizontal-mega-menu ul.mm-submenu li a:hover, .horizontal-mega-menu ul.mm-submenu.tree li.fa:hover:before, .horizontal-mega-menu ul.mm-submenu.tree li.mega-hover.fa:before, .horizontal-mega-menu ul.mm-submenu.tabbed>li.tab-opened.fa:before",attribute:"color"},"font_size":{element:".horizontal-mega-menu ul.mm-submenu",attribute:"font-size"},"button_background_color":{element:"ul.mm-submenu li.mm-contact-column button",attribute:"background"},"button_background_hover_color":{element:"ul.mm-submenu li.mm-contact-column button:hover",attribute:"background"},"button_text_color":{element:"ul.mm-submenu li.mm-contact-column button",attribute:"color"},"button_text_hover_color":{element:"ul.mm-submenu li.mm-contact-column button:hover",attribute:"color"},"vertical_text_color":{element:".vertical-mega-menu ul.mm-submenu",attribute:"color"},"vertical_link_color":{element:".vertical-mega-menu li a,.vertical-mega-menu li.fa",attribute:"color"},"vertical_link_hover_color":{element:".vertical-mega-menu>li:hover>a, .vertical-mega-menu ul.mm-submenu.tree li:hover>a, .vertical-mega-menu ul.mm-submenu.tree li.mega-hover>a, .vertical-mega-menu ul.mm-submenu.tabbed>li.tab-opened>a, .vertical-mega-menu ul.mm-submenu li a:hover, .vertical-mega-menu ul.mm-submenu.tree li.fa:hover:before, .vertical-mega-menu ul.mm-submenu.tree li.mega-hover.fa:before, .vertical-mega-menu ul.mm-submenu.tabbed>li.tab-opened.fa:before, .vertical-mega-menu ul.mm-submenu li.hovering>a",attribute:"color"},"vertical_font_size":{element:".vertical-mega-menu ul.mm-submenu",attribute:"font-size"}}; function liveDesign(setting,value) { if (window.self!==window.top) { /* jQuery(propSettings[setting].element).css(propSettings[setting].attribute,value); */ jQuery("#tempStyle").remove(); var styleSheet = '<style id="tempStyle" type="text/css">'; styleSheet += propSettings[setting].element+'{'+propSettings[setting].attribute+':'+value+' !important; }'; styleSheet += "</style>"; jQuery("head").append(styleSheet); } } var reinitAfterDesignTimeout; function updateDesign(setting,value) { if (window.self!==window.top) { jQuery("#tempStyle").remove(); item = {}; item.action = "design"; item.setting = setting; item.value = value; schemaDesignJSON.push(item); undo.push(item); /* jQuery(propSettings[setting].element).css(propSettings[setting].attribute,""); */ recreateDesign(); clearTimeout(reinitAfterDesignTimeout); reinitAfterDesignTimeout = setTimeout(function(){reinitMenus();},100); redo = []; parent.postMessage(["updateToolbar",JSON.stringify(schemaDesignJSON),JSON.stringify(linkLists),JSON.stringify(undo),JSON.stringify(redo),changedMenu], "*" ); } } function recreateDesign() { jQuery("#previewStyle").remove(); var styleSheet = '<style id="previewStyle" type="text/css">'; jQuery.each(schemaDesignJSON, function(key, item) { if (item.action=="design" && propSettings[item.setting]!=undefined) { styleSheet += propSettings[item.setting].element+'{'+propSettings[item.setting].attribute+':'+item.value+' !important; }'; } }); styleSheet += "</style>"; jQuery("head").append(styleSheet); } function designPanelOpened() { panelOpened = true; if (jQuery("ul.mm-submenu.tabbed").length>0) { jQuery(".horizontal-mega-menu:visible>.buddha-menu-item>ul.mm-submenu.tabbed").each(function(){ jQuery(this).closest(".buddha-menu-item").addClass("mega-hover"); return false; }); } else if (jQuery("ul.mm-submenu.simple").length>0) { jQuery(".horizontal-mega-menu:visible>.buddha-menu-item>ul.mm-submenu.simple").each(function(){ jQuery(this).closest(".buddha-menu-item").addClass("mega-hover"); return false; }); } else if (jQuery("ul.mm-submenu.contact").length>0) { jQuery(".horizontal-mega-menu:visible>.buddha-menu-item>ul.mm-submenu.contact").each(function(){ jQuery(this).closest(".buddha-menu-item").addClass("mega-hover"); return false; }); } else if (jQuery("ul.mm-submenu.tree").length>0) { jQuery(".horizontal-mega-menu:visible>.buddha-menu-item>ul.mm-submenu.tree").each(function(){ jQuery(this).closest(".buddha-menu-item").addClass("mega-hover"); return false; }); } setSubmenuBoundries(jQuery(".buddha-menu-item.mega-hover")); setContactSubmenuBoundries(jQuery(".buddha-menu-item.mega-hover")); if (jQuery("ul.mm-submenu.tabbed").length>0) { setTabbedSubmenuBoundries(jQuery(".buddha-menu-item.mega-hover>ul.mm-submenu.tabbed>li:first-child")); } jQuery(".horizontal-mega-menu>.buddha-menu-item").hover(function(){ jQuery(".mega-hover").removeClass("mega-hover"); if (panelOpened) { jQuery(this).addClass("mega-hover"); } }); } function designPanelClosed() { panelOpened = false; /* jQuery(".buddha-menu-item").removeClass("disabled"); */ jQuery(".mega-hover").removeClass("mega-hover"); } window.addEventListener("message", function(event) { if (window.self!==window.top) { if (~event.origin.indexOf("buddhaapps.com")) { if (typeof event.data=="object") { if (event.data[0]=="applyMegaMenu") { window[event.data[0]](event.data[1]); } else if (jQuery.inArray(event.data[0],["undoAction","redoAction","clearAction","initSaving","designPanelOpened","designPanelClosed"])!==-1) { window[event.data[0]](); } else if (jQuery.inArray(event.data[0],["liveDesign","updateDesign"])!==-1) { window[event.data[0]](event.data[1],event.data[2]); } } else { window[event.data](); } } else { return; } } }); /* PAGE UNLOADING FUNCTIONS */ function initSaving() { saving = true; } jQuery(window).on("beforeunload", function() { if (window.self!==window.top && (undo.length>0 || changedMenu) && !saving) { return "You might have unsaved changes."; } }); jQuery(window).on("unload", function() { changingPage = true; if (window.self!==window.top) { parent.postMessage("startLoader", "*" ); } }); /* STORE FRONT FUNCTIONS */ /* used to open/close the vertical menu */ function toggleSubmenu(element) { submenuToggled = true; var submenu = jQuery(element).closest("li").find("ul.mm-submenu").first(); if (!submenu.hasClass("submenu-opened")) { jQuery(element).closest("li").addClass("hovering"); jQuery(element).find(">.fa").removeClass("fa-plus-circle").addClass("fa-minus-circle"); submenu.addClass("submenu-opened"); } else { jQuery(element).closest("li").removeClass("hovering"); jQuery(element).find(">.fa").removeClass("fa-minus-circle").addClass("fa-plus-circle"); submenu.removeClass("submenu-opened"); } setTimeout(function(){ submenuToggled = false; },100); } function mmGoToPage(element) { if (!changingPage && !submenuToggled) { if (jQuery(element).attr("data-href")!="undefined") { changingPage = true; window.location=jQuery(element).attr("data-href"); } } } /* set the boundries of the submenus */ function setSubmenuBoundries(li) { var bodyWidth = jQuery("body").width(); var headerOffset = 1000; if (jQuery(li).find(">ul.mm-submenu.simple").length>0 || jQuery(li).find(">ul.mm-submenu.tabbed").length>0) { if (jQuery(li).closest(".horizontal-mega-menu").length>0) { /* get header offset */ /* IF YOU REMOVE .parent(). IT WILL AFFECT THE MENU FROM alex-woo-jewelry.myshopify.com */ jQuery(li).parent().parents().each(function(){ var offsetLeft = jQuery(this).offset().left+parseInt(jQuery(this).css("padding-left")); if (offsetLeft<headerOffset && offsetLeft>0) { headerOffset = offsetLeft; } }); if (headerOffset==1000 || bodyWidth<=768) { headerOffset = 0; } /* set menu width */ if (jQuery(li).find(">ul.mm-submenu.simple").length>0) { var submenu = jQuery(li).find(">ul.mm-submenu.simple"); } else { var submenu = jQuery(li).find(">ul.mm-submenu.tabbed"); } submenu.css({"width":"auto","left":"auto","right":"auto"}); /*submenu.removeAttr("style"); submenu.find(">li").removeAttr("style");*/ var headerWidth = bodyWidth-headerOffset*2; var itemsPerRow = 5; if (headerWidth>=1020) { submenu.attr("columns",5).css("width",headerWidth+"px"); itemsPerRow = 5; } else if (headerWidth>=816) { submenu.attr("columns",4).css("width",headerWidth+"px"); itemsPerRow = 4; } else if (headerWidth>=612) { submenu.attr("columns",3).css("width",headerWidth+"px"); itemsPerRow = 3; } else { submenu.attr("columns",2).css("width",headerWidth+"px"); itemsPerRow = 2; } if (jQuery(li).find(">ul.mm-submenu.tabbed").length>0) { --itemsPerRow; } /* set simple submenu boundry */ var offsetLeft = jQuery(li).offset().left+jQuery(li).outerWidth()/2; if (offsetLeft<(bodyWidth/2)) { var left = bodyWidth-(bodyWidth-jQuery(li).offset().left)-headerOffset; submenu.css("left",-left+"px"); } else { var right = bodyWidth-jQuery(li).offset().left-jQuery(li).outerWidth()-headerOffset; submenu.css("right",-right+"px"); } /* set min height for each element */ jQuery(li).find("ul.mm-submenu.simple>li").removeAttr("style"); jQuery(li).find(".mm-list-name").removeAttr("style"); /* if simple menu */ if (jQuery(li).find(">ul.mm-submenu.simple").length>0) { var rowMinHeight = 0; var mmListNameHeight = 0; jQuery(li).find("ul.mm-submenu.simple>li").each(function(i, item){ if (i%itemsPerRow==0) { rowMinHeight = 0; mmListNameHeight = 0; } if (jQuery(this).find(".mm-list-name").length>0) { if (jQuery(this).find(".mm-list-name").height()>mmListNameHeight) { mmListNameHeight = jQuery(this).find(".mm-list-name").height(); jQuery(this).find(".mm-list-name").css("height",mmListNameHeight); var previousItems = i; if (previousItems%itemsPerRow!=0) { while (previousItems%itemsPerRow!=0) { jQuery(li).find("ul.mm-submenu.simple").find(">li:nth-child("+previousItems+")").find(".mm-list-name").css("height",mmListNameHeight); previousItems--; } } } else { jQuery(this).find(".mm-list-name").css("height",mmListNameHeight); } } if (jQuery(this).outerHeight()>rowMinHeight) { rowMinHeight = jQuery(this).outerHeight()+2; jQuery(this).css("min-height",rowMinHeight); var previousItems = i; if (previousItems%itemsPerRow!=0) { while (previousItems%itemsPerRow!=0) { jQuery(li).find("ul.mm-submenu.simple").find(">li:nth-child("+previousItems+")").css("min-height",rowMinHeight); previousItems--; } } } else { jQuery(this).css("min-height",rowMinHeight); } }); /* if tabbed menu */ } else { jQuery(li).find("ul.mm-submenu.tabbed>li").each(function(i,tab){ var rowMinHeight = 0; var mmListNameHeight = 0; jQuery(tab).find("ul.mm-submenu.simple>li").each(function(j, item){ if (j%itemsPerRow==0) { rowMinHeight = 0; mmListNameHeight = 0; } if (jQuery(this).find(".mm-list-name").length>0) { if (jQuery(this).find(".mm-list-name").height()>mmListNameHeight) { mmListNameHeight = jQuery(this).find(".mm-list-name").height(); jQuery(this).find(".mm-list-name").css("height",mmListNameHeight); var previousItems = j; if (previousItems%itemsPerRow!=0) { while (previousItems%itemsPerRow!=0) { jQuery(this).parent().find(">li:nth-child("+previousItems+")").find(".mm-list-name").css("height",mmListNameHeight); previousItems--; } } } else { jQuery(this).find(".mm-list-name").css("height",mmListNameHeight); } } if (jQuery(this).outerHeight()>rowMinHeight) { rowMinHeight = jQuery(this).outerHeight()+2; jQuery(this).css("min-height",rowMinHeight); var previousItems = j; if (previousItems%itemsPerRow!=0) { while (previousItems%itemsPerRow!=0) { jQuery(li).find("ul.mm-submenu.simple").find(">li:nth-child("+previousItems+")").css("min-height",rowMinHeight); previousItems--; } } } else { jQuery(this).css("min-height",rowMinHeight); } }); }); /* add arrows */ jQuery(li).find("ul.mm-submenu.tabbed>li").addClass("fa fa-angle-right"); } } else { jQuery(li).find("ul.mm-submenu.tabbed").css({"left":"auto","right":"auto","width":"auto","height":"auto"}); jQuery(li).find("ul.mm-submenu.simple").css({"left":"auto","right":"auto","width":"auto"}); jQuery(li).find("ul.mm-submenu.simple>li").removeAttr("style"); if (jQuery(li).width()>=700) { jQuery(li).find("ul.mm-submenu.simple").attr("columns",3); $(".vertical-mega-menu ul.mm-submenu.mm-contact").attr("columns",2); } else if (jQuery(li).width()>=500) { jQuery(li).find("ul.mm-submenu.simple").attr("columns",2); $(".vertical-mega-menu ul.mm-submenu.mm-contact").attr("columns",2); } else { jQuery(li).find("ul.mm-submenu.simple").removeAttr("columns"); $(".vertical-mega-menu ul.mm-submenu.mm-contact").removeAttr("columns"); } } } else if (jQuery(li).find("ul.mm-submenu.tree").length>0) { var offsetLeft = jQuery(li).offset().left+jQuery(li).outerWidth()/2; if (offsetLeft<(bodyWidth/2)) { jQuery(li).find("ul.mm-submenu").removeClass("tree-open-left"); jQuery(li).find("ul.mm-submenu.tree li").removeClass("fa fa-angle-right fa-angle-left"); jQuery(li).find("ul.mm-submenu.tree li").each(function(){ if (jQuery(this).find("ul.mm-submenu").length>0) { jQuery(this).addClass("fa fa-angle-right"); } }); } else { jQuery(li).find("ul.mm-submenu").addClass("tree-open-left"); jQuery(li).find("ul.mm-submenu.tree li").removeClass("fa fa-angle-right fa-angle-left"); jQuery(li).find("ul.mm-submenu.tree li").each(function(){ if (jQuery(this).find("ul.mm-submenu").length>0) { jQuery(this).addClass("fa fa-angle-left"); } }); } } } /* when you hover over the tabs of the tabbed submenu, open their submenu + readjust the height of the tabbed submenu */ function setTabbedSubmenuBoundries(li) { if (jQuery(li).closest(".horizontal-mega-menu").length>0) { /* reset the boundries of the simple submenu, because it wasn"t visible before */ setSubmenuBoundries(jQuery(li).closest(".buddha-menu-item")); /* set the tabbed submenu height */ var currentLi = jQuery(li).parent().find(">li").index(jQuery(li)); if (jQuery(li).find(">ul.mm-submenu").length>0) { jQuery(li).find(">ul.mm-submenu").removeAttr("style"); var tabbedSubmenuHeight = jQuery(li).find(">ul.mm-submenu").outerHeight(); var tabsHeight = 0; jQuery(li).parent().find(">li").each(function(){ tabsHeight += jQuery(this).outerHeight(); }); if (tabsHeight>tabbedSubmenuHeight) { jQuery(li).parent().css("height",tabsHeight+"px"); jQuery(li).find(">ul.mm-submenu").css("height",tabsHeight+"px"); } else { jQuery(li).parent().css("height",tabbedSubmenuHeight+"px"); } } else { jQuery(li).parent().css("height","auto"); } /* set the simple submenu top */ var top = jQuery(li).parent().find(">li:nth-child("+(currentLi+1)+")").position().top; var currentStyle = jQuery(li).find(">ul.mm-submenu").attr("style"); var newStyle = ""; if (currentStyle!=undefined) { newStyle += currentStyle+";top:-"+top+"px !important"; } else { newStyle += "top:-"+top+"px !important"; } jQuery(li).find(">ul.mm-submenu").attr("style",newStyle); } else { jQuery(".tab-opened").removeClass("tab-opened"); } } /* set the boundries of the contact submenus */ function setContactSubmenuBoundries(li) { var bodyWidth = jQuery("body").width(); var headerOffset = 1000; if (jQuery(li).find(">ul.mm-submenu.mm-contact").length>0 && jQuery(li).closest(".horizontal-mega-menu").length>0) { /* get header offset */ jQuery(li).parents().each(function(){ var offsetLeft = jQuery(this).offset().left+parseInt(jQuery(this).css("padding-left")); if (offsetLeft<headerOffset && offsetLeft>0) { headerOffset = offsetLeft; } }); if (headerOffset==1000) { headerOffset = 0; } /* set menu width */ var submenu = jQuery(li).find(">ul.mm-submenu.mm-contact"); var headerWidth = bodyWidth-headerOffset*2; submenu.css({"width":headerWidth+"px","left":"auto","right":"auto"}); /* set simple submenu boundry */ var offsetLeft = jQuery(li).offset().left+jQuery(li).outerWidth()/2; if (offsetLeft<(bodyWidth/2)) { var left = bodyWidth-(bodyWidth-jQuery(li).offset().left)-headerOffset; submenu.css("left",-left+"px"); } else { var right = bodyWidth-jQuery(li).offset().left-jQuery(li).outerWidth()-headerOffset; submenu.css("right",-right+"px"); } } else { jQuery(li).find("ul.mm-submenu.mm-contact").css({"left":"auto","right":"auto","width":"auto","height":"auto"}); if (jQuery(li).find(">ul.mm-submenu.mm-contact").width()<=480) { jQuery(li).find(">ul.mm-submenu.mm-contact").addClass("one-column"); } } } function addTouch() { jQuery(".vertical-mega-menu>li.buddha-menu-item").off(); jQuery(".horizontal-mega-menu>li.buddha-menu-item").off(); /* when touching outside close the submenu */ jQuery("*").off("touchend"); jQuery("*").on("touchend", function (e) { if (jQuery(this).closest(".buddha-menu-item").length==0) { jQuery(".mega-hover").removeClass("mega-hover"); } }); jQuery(".horizontal-mega-menu>li.buddha-menu-item").off("touchend"); jQuery(".horizontal-mega-menu>li.buddha-menu-item").on("touchend", function (e) { "use strict"; var li = jQuery(this); if (li.find("ul.mm-submenu").length>0) { if (li.hasClass("mega-hover")) { return true; } else { e.preventDefault(); jQuery(".mega-hover").removeClass("mega-hover"); li.addClass("mega-hover"); setSubmenuBoundries(li); return false; } } else { return true; } }); var elementTouched = false; jQuery(".vertical-mega-menu li").off("touchend"); jQuery(".vertical-mega-menu li").on("touchend", function (e) { "use strict"; if (!elementTouched) { elementTouched = true; setTimeout(function(){ elementTouched = false; },300); var li = jQuery(this); if (li.find("ul.mm-submenu").length>0) { if (li.hasClass("hovering")) { return true; } else { e.preventDefault(); li.find(">a>.toggle-menu-btn").click(); return false; } } else { return true; } } }); jQuery(".horizontal-mega-menu>li.buddha-menu-item>ul.mm-submenu.tabbed>li").off("touchend"); jQuery(".horizontal-mega-menu>li.buddha-menu-item>ul.mm-submenu.tabbed>li").on("touchend", function (e) { "use strict"; var li = jQuery(this); if (li.find("ul.mm-submenu").length>0) { if (li.hasClass("tab-opened")) { return true; } else { e.preventDefault(); li.parent().find(">li").removeClass("tab-opened"); li.addClass("tab-opened"); setTabbedSubmenuBoundries(li); setSubmenuBoundries(li.parent().parent()); return false; } } else { return true; } }); jQuery(".horizontal-mega-menu>li.buddha-menu-item>ul.mm-submenu.tree li").off("touchend"); jQuery(".horizontal-mega-menu>li.buddha-menu-item>ul.mm-submenu.tree li").on("touchend", function (e) { "use strict"; var li = jQuery(this); if (li.find("ul.mm-submenu").length>0) { if (li.hasClass("mega-hover")) { return true; } else { e.preventDefault(); li.parent().find(">li").removeClass("mega-hover"); li.addClass("mega-hover"); li.find(".mega-hover").removeClass("mega-hover"); jQuery.each(li.parents(),function(){ if (jQuery(this).prop("tagName").toLowerCase()=="li") { jQuery(this).addClass("mega-hover"); } }); setSubmenuBoundries(li); return false; } } else { return true; } }); } function getUlPath(element) { var path, node = element; var firstNode = true; while (node.length) { var realNode = node[0], name = realNode.localName; if (!name) break; name = name.toLowerCase(); var parent = node.parent(); var nthChild = ""; var sameTagSiblings = parent.children(name); if (sameTagSiblings.length > 1) { allSiblings = parent.children(); var index = allSiblings.index(realNode) + 1; if (index > 0) { nthChild = ":nth-child(" + index + ")"; } } var idClass = ""; ignoreClass = false; if (name!="body" && name!="html") { if(jQuery(realNode).prop("id").length > 0) { idClass = "#"+realNode.id; } else if (jQuery(realNode).prop("class").length > 0 && !firstNode && !ignoreClass) { idClass = "."+realNode.className.trim().replace(/ /g, ".").replace(".is-light", "").replace(".is-dark", "").replace(".is-complete", "").replace(".is-processing", "").replace("..",".").replace("..",".").replace("..",".").replace("..",".").replace("..","."); idClass = idClass.replace(".DomOutlineBox", "").replace(".vertical-mega-menu", "").replace(".horizontal-mega-menu", ""); } } if (jQuery.inArray(name,["li","ul"])!==-1) { name += nthChild; } firstNode = false; path = name + idClass + (path ? ">" + path : ""); node = parent; } return path; } } </script>