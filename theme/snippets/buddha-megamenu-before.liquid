<script> var linkLists = {}; {% for list in linklists %} linkLists["{{ list.handle }}"] = {}; linkLists["{{ list.handle }}"].title = "{{ list.title }}"; linkLists["{{ list.handle }}"].items = []; {% for link in linklists[list.handle].links %} linkLists["{{ list.handle }}"].items[linkLists["{{ list.handle }}"].items.length] = "{{ link.url }}"; {% endfor %} {% endfor %} </script><style class="buddha-mm-style">.buddha-disabled-menu{display:none !important}</style> <script> var beforeMegaMenuInterval = setInterval(function(){ menu = "main-menu"; var links = []; jQuery.each(linkLists,function(key, item){ if (menu==key) { links = item.items; return false; } }); jQuery("ul").each(function(){ var menuFits = true; var elementFits = 0; jQuery(this).find(">li").each(function(){ var href = jQuery(this).find("a").first().attr("href"); if (links[elementFits]!=undefined && href==links[elementFits]) { elementFits++; } else if (elementFits>0 && elementFits!=links.length) { menuFits = false; } }); if (menuFits && elementFits>0) { jQuery(this).addClass("buddha-disabled-menu"); } }); },1); </script>